import 'reflect-metadata';
import { Component } from '@angular/core';
export function OComponent(newCompAnnotations) {
    function OComponentInner(target) {
        var parentTarget = Object.getPrototypeOf(target.prototype).constructor;
        var parentAnnotations = Reflect.getMetadata('annotations', parentTarget);
        if (parentAnnotations) {
            var parentAnnotation = parentAnnotations[0];
            copyDecorators(newCompAnnotations, parentAnnotation);
        }
        else if (parentTarget.hasOwnProperty('decorators')) {
            var parentDecorators = getDecorators(parentTarget);
            copyDecorators(newCompAnnotations, parentDecorators);
        }
        var metadata = new Component(newCompAnnotations);
        Reflect.defineMetadata('annotations', [metadata], target);
    }
    return OComponentInner;
}
function isPresent(obj) {
    return obj !== undefined && obj !== null;
}
function getDecorators(target) {
    var decoratorsObj;
    var decorators = target.decorators[0];
    if (decorators && decorators.args && decorators.args[0]) {
        decoratorsObj = decorators.args[0];
    }
    return decoratorsObj;
}
function copyDecorators(newComp, parent) {
    var _this = this;
    Object.keys(parent).forEach(function (key) {
        if (isPresent(parent[key])) {
            if (!isPresent(newComp[key])) {
                if (typeof newComp[key] === 'function') {
                    newComp[key] = newComp[key].call(_this, parent[key]);
                }
                else {
                    newComp[key] = parent[key];
                }
            }
        }
        if (!isPresent(newComp[key])) {
            newComp[key] = parent[key];
        }
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiby1jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9vbnRpbWl6ZS13ZWItbmd4LyIsInNvdXJjZXMiOlsibGliL2RlY29yYXRvcnMvby1jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxrQkFBa0IsQ0FBQztBQUUxQixPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTFDLE1BQU0sVUFBVSxVQUFVLENBQUMsa0JBQXVCO0lBRWhELFNBQVMsZUFBZSxDQUFDLE1BQWdCO1FBQ3ZDLElBQU0sWUFBWSxHQUFHLE1BQU0sQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFdBQVcsQ0FBQztRQUN6RSxJQUFNLGlCQUFpQixHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsYUFBYSxFQUFFLFlBQVksQ0FBQyxDQUFDO1FBQzNFLElBQUksaUJBQWlCLEVBQUU7WUFDckIsSUFBTSxnQkFBZ0IsR0FBRyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM5QyxjQUFjLENBQUMsa0JBQWtCLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztTQUN0RDthQUFNLElBQUksWUFBWSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUNwRCxJQUFNLGdCQUFnQixHQUFHLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUNyRCxjQUFjLENBQUMsa0JBQWtCLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztTQUN0RDtRQUNELElBQU0sUUFBUSxHQUFHLElBQUksU0FBUyxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDbkQsT0FBTyxDQUFDLGNBQWMsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBQ0QsT0FBTyxlQUFlLENBQUM7QUFDekIsQ0FBQztBQUVELFNBQVMsU0FBUyxDQUFDLEdBQUc7SUFDcEIsT0FBTyxHQUFHLEtBQUssU0FBUyxJQUFJLEdBQUcsS0FBSyxJQUFJLENBQUM7QUFDM0MsQ0FBQztBQUVELFNBQVMsYUFBYSxDQUFDLE1BQVc7SUFDaEMsSUFBSSxhQUFhLENBQUM7SUFDbEIsSUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4QyxJQUFJLFVBQVUsSUFBSSxVQUFVLENBQUMsSUFBSSxJQUFJLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDdkQsYUFBYSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDcEM7SUFDRCxPQUFPLGFBQWEsQ0FBQztBQUN2QixDQUFDO0FBRUQsU0FBUyxjQUFjLENBQUMsT0FBWSxFQUFFLE1BQVc7SUFBakQsaUJBZUM7SUFkQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFBLEdBQUc7UUFDN0IsSUFBSSxTQUFTLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7WUFDMUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtnQkFDNUIsSUFBSSxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxVQUFVLEVBQUU7b0JBQ3RDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUksRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztpQkFDckQ7cUJBQU07b0JBQ0wsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztpQkFDNUI7YUFDRjtTQUNGO1FBQ0QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtZQUM1QixPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQzVCO0lBQ0gsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICdyZWZsZWN0LW1ldGFkYXRhJztcblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBPQ29tcG9uZW50KG5ld0NvbXBBbm5vdGF0aW9uczogYW55KSB7XG5cbiAgZnVuY3Rpb24gT0NvbXBvbmVudElubmVyKHRhcmdldDogRnVuY3Rpb24pIHtcbiAgICBjb25zdCBwYXJlbnRUYXJnZXQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGFyZ2V0LnByb3RvdHlwZSkuY29uc3RydWN0b3I7XG4gICAgY29uc3QgcGFyZW50QW5ub3RhdGlvbnMgPSBSZWZsZWN0LmdldE1ldGFkYXRhKCdhbm5vdGF0aW9ucycsIHBhcmVudFRhcmdldCk7XG4gICAgaWYgKHBhcmVudEFubm90YXRpb25zKSB7XG4gICAgICBjb25zdCBwYXJlbnRBbm5vdGF0aW9uID0gcGFyZW50QW5ub3RhdGlvbnNbMF07XG4gICAgICBjb3B5RGVjb3JhdG9ycyhuZXdDb21wQW5ub3RhdGlvbnMsIHBhcmVudEFubm90YXRpb24pO1xuICAgIH0gZWxzZSBpZiAocGFyZW50VGFyZ2V0Lmhhc093blByb3BlcnR5KCdkZWNvcmF0b3JzJykpIHtcbiAgICAgIGNvbnN0IHBhcmVudERlY29yYXRvcnMgPSBnZXREZWNvcmF0b3JzKHBhcmVudFRhcmdldCk7XG4gICAgICBjb3B5RGVjb3JhdG9ycyhuZXdDb21wQW5ub3RhdGlvbnMsIHBhcmVudERlY29yYXRvcnMpO1xuICAgIH1cbiAgICBjb25zdCBtZXRhZGF0YSA9IG5ldyBDb21wb25lbnQobmV3Q29tcEFubm90YXRpb25zKTtcbiAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKCdhbm5vdGF0aW9ucycsIFttZXRhZGF0YV0sIHRhcmdldCk7XG4gIH1cbiAgcmV0dXJuIE9Db21wb25lbnRJbm5lcjtcbn1cblxuZnVuY3Rpb24gaXNQcmVzZW50KG9iaikge1xuICByZXR1cm4gb2JqICE9PSB1bmRlZmluZWQgJiYgb2JqICE9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBnZXREZWNvcmF0b3JzKHRhcmdldDogYW55KSB7XG4gIGxldCBkZWNvcmF0b3JzT2JqO1xuICBjb25zdCBkZWNvcmF0b3JzID0gdGFyZ2V0LmRlY29yYXRvcnNbMF07XG4gIGlmIChkZWNvcmF0b3JzICYmIGRlY29yYXRvcnMuYXJncyAmJiBkZWNvcmF0b3JzLmFyZ3NbMF0pIHtcbiAgICBkZWNvcmF0b3JzT2JqID0gZGVjb3JhdG9ycy5hcmdzWzBdO1xuICB9XG4gIHJldHVybiBkZWNvcmF0b3JzT2JqO1xufVxuXG5mdW5jdGlvbiBjb3B5RGVjb3JhdG9ycyhuZXdDb21wOiBhbnksIHBhcmVudDogYW55KSB7XG4gIE9iamVjdC5rZXlzKHBhcmVudCkuZm9yRWFjaChrZXkgPT4ge1xuICAgIGlmIChpc1ByZXNlbnQocGFyZW50W2tleV0pKSB7XG4gICAgICBpZiAoIWlzUHJlc2VudChuZXdDb21wW2tleV0pKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbmV3Q29tcFtrZXldID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgbmV3Q29tcFtrZXldID0gbmV3Q29tcFtrZXldLmNhbGwodGhpcywgcGFyZW50W2tleV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld0NvbXBba2V5XSA9IHBhcmVudFtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghaXNQcmVzZW50KG5ld0NvbXBba2V5XSkpIHtcbiAgICAgIG5ld0NvbXBba2V5XSA9IHBhcmVudFtrZXldO1xuICAgIH1cbiAgfSk7XG59XG4iXX0=